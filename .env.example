# Upfirst Platform - Environment Variables Template
# Copy this file to .env and fill in your actual values

# Database (Docker will override with container values)
DATABASE_URL=postgresql://postgres:postgres_dev_password@localhost:5432/upfirst_dev

# Database Connection Pool Configuration
# Min connections: 2 (avoid cold starts)
# Max connections: 10-20 for moderate traffic (scale based on needs)
# Connection timeout: 10s
# Statement timeout: 30s (long enough for complex queries but prevents hanging)
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_CONNECTION_TIMEOUT=10
DATABASE_STATEMENT_TIMEOUT=30000
DATABASE_QUERY_TIMEOUT=60000

# Redis
REDIS_URL=redis://localhost:6379

# Session
SESSION_SECRET=your-session-secret-here

# Stripe
STRIPE_SECRET_KEY=sk_test_your_stripe_key
VITE_STRIPE_PUBLIC_KEY=pk_test_your_stripe_public_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Resend Email
RESEND_API_KEY=re_your_resend_key
RESEND_FROM_EMAIL=noreply@yourdomain.com

# Shippo Shipping
SHIPPO_API_KEY=shippo_test_your_key

# Google Gemini AI
GEMINI_API_KEY=your_gemini_api_key

# Object Storage
DEFAULT_OBJECT_STORAGE_BUCKET_ID=your_bucket_id
PUBLIC_OBJECT_SEARCH_PATHS=public
PRIVATE_OBJECT_DIR=.private

# Meta Ads (optional)
META_APP_ID=your_meta_app_id
META_APP_SECRET=your_meta_app_secret

# LocationIQ (optional)
LOCATIONIQ_API_KEY=your_locationiq_key

# Cache Configuration
# Backend: memory (default) or redis
CACHE_BACKEND=memory
# Default TTL in seconds (5 minutes)
CACHE_DEFAULT_TTL=300
# TTL for product data (5 minutes)
CACHE_TTL_PRODUCTS=300
# TTL for currency rates (1 hour)
CACHE_TTL_CURRENCY=3600
# TTL for pricing calculations (5 minutes)
CACHE_TTL_PRICING=300
# TTL for session data (24 hours)
CACHE_TTL_SESSION=86400
# Max cache size for in-memory backend (number of entries)
CACHE_MAX_SIZE=1000

# Rate Limiting Configuration (Production-Grade Token Bucket Algorithm)
# Backend: memory (default) or redis
RATE_LIMIT_BACKEND=memory

# Global Rate Limiting (DDoS Prevention)
# Max requests per window per IP address
RATE_LIMIT_GLOBAL_MAX=1000
# Window duration in seconds (60 = 1 minute)
RATE_LIMIT_GLOBAL_WINDOW=60

# Authentication Rate Limiting (Brute Force Prevention)
# Max login attempts per window per IP
RATE_LIMIT_AUTH_MAX=5
# Window duration in seconds (900 = 15 minutes)
RATE_LIMIT_AUTH_WINDOW=900

# Per-User Rate Limiting (Authenticated Users)
# Max requests per window per user
RATE_LIMIT_USER_MAX=100
# Window duration in seconds (60 = 1 minute)
RATE_LIMIT_USER_WINDOW=60

# Per-Endpoint Rate Limiting (Custom Limits)
# Max requests per window per endpoint
RATE_LIMIT_ENDPOINT_MAX=1000
# Window duration in seconds (60 = 1 minute)
RATE_LIMIT_ENDPOINT_WINDOW=60

# IP Allowlist (Comma-separated, supports CIDR notation)
# Examples: 127.0.0.1,192.168.0.0/16,10.0.0.0/8
# Leave empty to disable allowlist
RATE_LIMIT_ALLOWLIST=
